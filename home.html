<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- ========================= SEO Meta Tags ========================= -->
    <title>NovofitBD - Elevate Your Essence</title>
    <meta
      name="description"
      content="NovofitBD - Redefining fashion with timeless elegance and modern craftsmanship. Shop our exclusive collections."
    />
    <meta
      name="keywords"
      content="fashion, luxury, streetwear, bangladesh, novofit"
    />
    <meta name="author" content="NovofitBD" />

    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&family=Poppins:wght@200;300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/@phosphor-icons/web@2.0.3"></script>

    <style>
      :root {
        --background: #0d0d0d;
        --text: #e8e8e8;
        --accent: #ffffff;
        --border: #2a2a2a;
        --secondary-text: #a8a8a8;
      }

      /* Smooth Scroll Setup */
      html.lenis {
        height: auto;
      }
      .lenis.lenis-smooth {
        scroll-behavior: auto !important;
      }
      .lenis.lenis-stopped {
        overflow: hidden;
      }

      body {
        font-family: "Poppins", sans-serif;
        background-color: var(--background);
        color: var(--text);
        overflow-x: hidden;
        margin: 0;
      }

      .font-heading {
        font-family: "Cormorant Garamond", serif;
      }
      .font-body {
        font-family: "Poppins", sans-serif;
      }

      /* Custom Cursor */
      .cursor {
        position: fixed;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: var(--accent);
        pointer-events: none;
        mix-blend-mode: difference;
        z-index: 9999;
        transform: translate(-50%, -50%);
      }
      .cursor-follower {
        position: fixed;
        width: 40px;
        height: 40px;
        border: 1px solid var(--accent);
        border-radius: 50%;
        pointer-events: none;
        mix-blend-mode: difference;
        z-index: 9999;
        transform: translate(-50%, -50%);
        transition: transform 0.1s;
      }
      .cursor-grow {
        transform: translate(-50%, -50%) scale(2.5);
        background: var(--accent);
        mix-blend-mode: difference;
      }

      /* Navigation & Overlays (Copied from Shop) */
      #mobile-menu,
      #search-overlay {
        position: fixed;
        top: 0;
        right: 0;
        width: 100%;
        height: 100vh;
        background-color: var(--background);
        z-index: 5000;
        transform: translateX(100%);
        transition: transform 0.6s cubic-bezier(0.7, 0, 0.3, 1);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      #search-overlay {
        transform: translateY(-100%);
      }
      #mobile-menu.open {
        transform: translateX(0);
      }
      #search-overlay.open {
        transform: translateY(0);
      }

      /* Hero Section Styles */
      .hero-section {
        height: 100vh;
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .hero-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 120%; /* Taller for parallax */
        object-fit: cover;
        opacity: 0.6;
        z-index: -1;
      }
      .hero-content h1 {
        line-height: 0.9;
        letter-spacing: -0.02em;
        opacity: 0;
        transform: translateY(30px);
      }
      .hero-line {
        width: 1px;
        height: 0;
        background: rgba(255, 255, 255, 0.3);
        margin: 2rem auto;
      }

      /* Marquee */
      .marquee-container {
        overflow: hidden;
        white-space: nowrap;
        padding: 2rem 0;
        background: var(--accent);
        color: var(--background);
      }
      .marquee-content {
        display: inline-block;
        animation: scroll 20s linear infinite;
      }
      @keyframes scroll {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(-50%);
        }
      }

      /* Categories Grid */
      .category-card {
        position: relative;
        overflow: hidden;
        height: 600px;
        transition: all 0.5s ease;
      }
      .category-card img {
        transition: transform 1.2s cubic-bezier(0.19, 1, 0.22, 1);
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      .category-card:hover img {
        transform: scale(1.1);
      }
      .category-overlay {
        background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
      }

      /* Magnetic Effect Class */
      .magnetic-item {
        display: inline-block;
      }

      /* Product Card (Matches Shop) */
      .product-card img {
        transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }
      .product-card:hover img {
        transform: scale(1.05);
      }

      .reveal-text {
        clip-path: polygon(0 0, 100% 0, 100% 100%, 0% 100%);
      }
      .char {
        display: inline-block;
        transform: translateY(100%);
        opacity: 0;
      }

      /* Cart Notification */
      #cart-notification {
        position: fixed;
        bottom: 2rem;
        left: 50%;
        transform: translate(-50%, 200%);
        background-color: white;
        color: black;
        padding: 1rem 2rem;
        border-radius: 9999px;
        z-index: 5000;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        transition: transform 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
        font-family: "Poppins", sans-serif;
        font-size: 0.875rem;
        font-weight: 500;
      }
    </style>
  </head>
  <body class="antialiased selection:bg-white selection:text-black">
    <!-- Custom Cursor -->
    <div class="cursor"></div>
    <div class="cursor-follower"></div>

    <!-- Loading Screen -->
    <div
      id="loader"
      class="fixed inset-0 bg-black z-[9999] flex items-center justify-center transition-opacity duration-1000"
    >
      <div class="text-center">
        <h1
          class="font-heading text-4xl md:text-6xl text-white tracking-widest uppercase animate-pulse"
        >
          Novofit
        </h1>
      </div>
    </div>

    <!-- Add to Cart Notification -->
    <div id="cart-notification">
      <i class="ph-fill ph-check-circle text-green-600 text-xl"></i>
      <span>Item added to cart</span>
    </div>

    <!-- Search Overlay -->
    <div id="search-overlay" class="p-8">
      <button
        id="close-search-btn"
        class="absolute top-8 right-8 text-white z-50"
      >
        <i class="ph ph-x text-3xl magnetic-item"></i>
      </button>
      <div class="w-full max-w-3xl text-center">
        <input
          type="text"
          id="search-input"
          placeholder="Search..."
          class="w-full bg-transparent border-b border-gray-700 text-4xl md:text-6xl text-center text-white focus:outline-none font-heading py-4"
        />
      </div>
    </div>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="p-8">
      <button id="close-menu" class="absolute top-8 right-8 text-white z-50">
        <i class="ph ph-x text-3xl magnetic-item"></i>
      </button>
      <nav class="flex flex-col space-y-8 text-center">
        <a
          href="home"
          class="font-heading text-4xl uppercase hover:text-gray-400 transition-colors"
          >Home</a
        >
        <a
          href="shop"
          class="font-heading text-4xl uppercase hover:text-gray-400 transition-colors"
          >Shop</a
        >
        <a
          href="gallery"
          class="font-heading text-4xl uppercase hover:text-gray-400 transition-colors"
          >Gallery</a
        >
        <a
          href="contact"
          class="font-heading text-4xl uppercase hover:text-gray-400 transition-colors"
          >Contact</a
        >
      </nav>
    </div>

    <!-- Header -->
    <header
      class="fixed top-0 left-0 w-full z-40 p-6 md:p-8 transition-all duration-500 bg-transparent"
    >
      <div class="container mx-auto flex justify-between items-center">
        <a href="home" class="z-50 mix-blend-difference text-white">
          <div
            class="text-xl font-bold tracking-widest uppercase magnetic-item font-heading"
          >
            NovofitBD
          </div>
        </a>

        <!-- Desktop Nav -->
        <nav
          class="hidden md:flex items-center space-x-12 mix-blend-difference text-white"
        >
          <a
            href="home"
            class="text-sm uppercase tracking-widest hover-link magnetic-item"
            >Home</a
          >
          <a
            href="shop"
            class="text-sm uppercase tracking-widest hover-link magnetic-item"
            >Shop</a
          >
          <a
            href="gallery"
            class="text-sm uppercase tracking-widest hover-link magnetic-item"
            >Gallery</a
          >
          <a
            href="contact"
            class="text-sm uppercase tracking-widest hover-link magnetic-item"
            >Contact</a
          >
        </nav>

        <!-- Icons -->
        <div
          class="flex items-center space-x-6 mix-blend-difference text-white"
        >
          <button id="open-search-btn" class="hover-link magnetic-item">
            <i class="ph ph-magnifying-glass text-xl"></i>
          </button>
          <a href="cart" class="hover-link magnetic-item relative">
            <i class="ph ph-shopping-bag text-xl"></i>
            <span
              id="cart-count"
              class="absolute -top-2 -right-2 bg-white text-black text-[10px] h-4 w-4 rounded-full flex items-center justify-center font-bold"
              >0</span
            >
          </a>
          <button id="hamburger-btn" class="md:hidden magnetic-item">
            <i class="ph ph-list text-2xl"></i>
          </button>
        </div>
      </div>
    </header>

    <main id="smooth-wrapper">
      <!-- Hero Section -->
      <section class="hero-section">
        <img
          src="https://images.unsplash.com/photo-1490481651871-ab68de25d43d?q=80&w=2070&auto=format&fit=crop"
          alt="Novofit Hero"
          class="hero-bg"
          data-speed="0.5"
        />
        <div class="absolute inset-0 bg-black/30"></div>

        <div class="hero-content relative z-10 text-center px-4">
          <p
            class="text-sm md:text-base uppercase tracking-[0.3em] mb-4 text-gray-300 hero-anim"
          >
            Est. 2025
          </p>
          <h1
            class="text-6xl md:text-8xl lg:text-[10rem] font-heading font-light text-white mb-6 hero-anim"
          >
            Elevate Your <br />
            <span class="italic">Essence</span>
          </h1>
          <div class="hero-line hero-anim"></div>
          <div class="hero-anim">
            <a
              href="shop"
              class="inline-block border border-white/30 bg-white/5 backdrop-blur-sm px-8 py-3 rounded-full uppercase text-xs tracking-widest hover:bg-white hover:text-black transition-all duration-500 magnetic-item"
            >
              Explore Collection
            </a>
          </div>
        </div>
      </section>

      <!-- Marquee Section -->
      <div class="marquee-container font-heading text-4xl md:text-6xl italic">
        <div class="marquee-content">
          New Arrivals — Timeless Elegance — Modern Craftsmanship — Free
          Shipping Worldwide — The New Standard — New Arrivals — Timeless
          Elegance — Modern Craftsmanship — Free Shipping Worldwide — The New
          Standard —
        </div>
      </div>

      <!-- Introduction Section -->
      <section class="py-24 md:py-32 container mx-auto px-6">
        <div class="flex flex-col md:flex-row gap-16 items-center">
          <div class="w-full md:w-1/2" data-speed="0.9">
            <h2 class="font-heading text-5xl md:text-7xl mb-8 leading-tight">
              Weaving stories <br />
              into every <span class="italic text-gray-500">stitch.</span>
            </h2>
          </div>
          <div class="w-full md:w-1/2 flex flex-col gap-8">
            <p class="text-gray-400 text-lg leading-relaxed max-w-md">
              At NovofitBD, we believe fashion is more than just clothing—it is
              an expression of identity. Our collections are curated for those
              who seek perfection in simplicity and boldness in detail.
            </p>
            <a
              href="our-studio"
              class="text-white border-b border-white pb-1 w-max uppercase text-xs tracking-widest hover:text-gray-400 transition-colors"
              >Our Story</a
            >
          </div>
        </div>
      </section>

      <!-- Categories Grid (Bento Style) -->
      <section class="py-10 container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Men -->
          <a href="shop?category=Men" class="category-card group block w-full">
            <img
              src="https://images.unsplash.com/photo-1617137984095-74e4e5e3613f?q=80&w=2187&auto=format&fit=crop"
              alt="Men's Collection"
            />
            <div
              class="category-overlay absolute inset-0 flex flex-col justify-end p-8 md:p-12 opacity-90 transition-opacity duration-300"
            >
              <span
                class="text-xs font-bold uppercase tracking-widest mb-2 text-gray-300"
                >Collection 01</span
              >
              <h3
                class="font-heading text-5xl text-white group-hover:translate-x-2 transition-transform duration-300"
              >
                Men
              </h3>
            </div>
          </a>

          <!-- Women -->
          <a
            href="shop?category=Women"
            class="category-card group block w-full mt-0 md:mt-24"
          >
            <img
              src="https://images.unsplash.com/photo-1534528741775-53994a69daeb?q=80&w=1964&auto=format&fit=crop"
              alt="Women's Collection"
            />
            <div
              class="category-overlay absolute inset-0 flex flex-col justify-end p-8 md:p-12 opacity-90 transition-opacity duration-300"
            >
              <span
                class="text-xs font-bold uppercase tracking-widest mb-2 text-gray-300"
                >Collection 02</span
              >
              <h3
                class="font-heading text-5xl text-white group-hover:translate-x-2 transition-transform duration-300"
              >
                Women
              </h3>
            </div>
          </a>

          <!-- Girls / Accessories -->
          <div
            class="col-span-1 md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"
          >
            <a
              href="shop?category=Girls"
              class="category-card group block w-full h-[400px]"
            >
              <img
                src="https://images.unsplash.com/photo-1645561305577-4cb5be67a40a?q=80&w=765&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
                alt="Girls Collection"
              />
              <div
                class="category-overlay absolute inset-0 flex flex-col justify-end p-8"
              >
                <h3 class="font-heading text-4xl text-white">Girls</h3>
              </div>
            </a>
            <a
              href="shop?category=Others"
              class="category-card group block w-full h-[400px]"
            >
              <img
                src="https://images.unsplash.com/photo-1492707892479-7bc8d5a4ee93?q=80&w=2193&auto=format&fit=crop"
                alt="Accessories"
              />
              <div
                class="category-overlay absolute inset-0 flex flex-col justify-end p-8"
              >
                <h3 class="font-heading text-4xl text-white">Accessories</h3>
              </div>
            </a>
          </div>
        </div>
      </section>

      <!-- Featured Products -->
      <section class="py-32 bg-[#111]">
        <div
          class="container mx-auto px-6 mb-16 flex justify-between items-end"
        >
          <div>
            <span
              class="text-xs uppercase tracking-[0.2em] text-gray-400 block mb-2"
              >Curated For You</span
            >
            <h2 class="font-heading text-4xl md:text-5xl">Latest Arrivals</h2>
          </div>
          <a
            href="shop"
            class="hidden md:inline-block border border-white/20 px-6 py-2 rounded-full uppercase text-xs tracking-widest hover:bg-white hover:text-black transition-all"
          >
            View All
          </a>
        </div>

        <div class="container mx-auto px-6">
          <!-- Product Slider / Grid -->
          <div
            id="featured-products"
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"
          >
            <!-- Products will be injected via JS -->
            <div class="col-span-full text-center py-20 text-gray-500">
              <div
                class="inline-block w-8 h-8 border-2 border-white/20 border-t-white rounded-full animate-spin mb-4"
              ></div>
              <p>Loading collection...</p>
            </div>
          </div>

          <div class="mt-12 text-center md:hidden">
            <a
              href="shop"
              class="inline-block border border-white/20 px-8 py-3 rounded-full uppercase text-xs tracking-widest hover:bg-white hover:text-black transition-all"
            >
              View All Products
            </a>
          </div>
        </div>
      </section>

      <!-- CTA / Video Section -->
      <section
        class="relative h-[80vh] flex items-center justify-center overflow-hidden"
      >
        <img
          src="https://images.unsplash.com/photo-1558769132-cb1aea458c5e?q=80&w=2274&auto=format&fit=crop"
          class="absolute inset-0 w-full h-full object-cover grayscale opacity-40"
          alt="Studio"
          data-speed="0.3"
        />
        <div class="relative z-10 text-center max-w-4xl px-6">
          <h2 class="font-heading text-5xl md:text-7xl lg:text-8xl mb-8">
            Join the Movement
          </h2>
          <p class="text-lg md:text-xl text-gray-300 mb-10 max-w-2xl mx-auto">
            Sign up for our newsletter to receive exclusive offers, early access
            to new drops, and stories from our studio.
          </p>
          <form
            class="flex flex-col md:flex-row gap-4 max-w-md mx-auto"
            onsubmit="event.preventDefault(); alert('Thank you for subscribing!');"
          >
            <input
              type="email"
              placeholder="Email Address"
              class="bg-transparent border-b border-white/50 py-3 px-2 text-white focus:outline-none focus:border-white flex-grow font-light"
              required
            />
            <button
              type="submit"
              class="uppercase text-xs tracking-widest font-bold py-3 px-6 hover:bg-white hover:text-black transition-all border border-transparent hover:border-white rounded-sm mt-4 md:mt-0"
            >
              Subscribe
            </button>
          </form>
        </div>
      </section>
    </main>

    <!-- Footer (Matching Shop) -->
    <footer
      class="bg-black py-16 border-t border-[var(--border)] relative z-10"
    >
      <div class="container mx-auto px-6">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-12">
          <div class="col-span-1 md:col-span-2">
            <h3
              class="text-xl font-bold mb-4 uppercase tracking-wider font-heading"
            >
              NovofitBD
            </h3>
            <p class="text-gray-400 mb-6 max-w-sm font-body">
              Follow us on our social media channels to see our latest designs
              and updates.
            </p>
            <div class="flex space-x-4 mt-8">
              <!-- Social Icons -->
              <a
                href="#"
                class="text-gray-400 hover:text-white transition-colors"
                ><i class="ph ph-facebook-logo text-2xl"></i
              ></a>
              <a
                href="#"
                class="text-gray-400 hover:text-white transition-colors"
                ><i class="ph ph-instagram-logo text-2xl"></i
              ></a>
              <a
                href="#"
                class="text-gray-400 hover:text-white transition-colors"
                ><i class="ph ph-tiktok-logo text-2xl"></i
              ></a>
            </div>
          </div>
          <div class="col-span-1">
            <h4 class="font-bold mb-4 uppercase tracking-wider font-heading">
              Shop
            </h4>
            <ul class="space-y-3 text-gray-400 font-body text-sm">
              <li>
                <a href="shop" class="hover:text-white transition-colors"
                  >All Products</a
                >
              </li>
              <li>
                <a
                  href="shop?category=Men"
                  class="hover:text-white transition-colors"
                  >Men</a
                >
              </li>
              <li>
                <a
                  href="shop?category=Women"
                  class="hover:text-white transition-colors"
                  >Women</a
                >
              </li>
              <li>
                <a
                  href="shop?category=Girls"
                  class="hover:text-white transition-colors"
                  >Girls</a
                >
              </li>
            </ul>
          </div>
          <div class="col-span-1">
            <h4 class="font-bold mb-4 uppercase tracking-wider font-heading">
              About
            </h4>
            <ul class="space-y-3 text-gray-400 font-body text-sm">
              <li>
                <a href="our-studio" class="hover:text-white transition-colors"
                  >Our Studio</a
                >
              </li>
              <li>
                <a href="gallery" class="hover:text-white transition-colors"
                  >Gallery</a
                >
              </li>
              <li>
                <a href="contact" class="hover:text-white transition-colors"
                  >Contact</a
                >
              </li>
            </ul>
          </div>
        </div>
        <div
          class="mt-16 pt-8 border-t border-[var(--border)] text-center text-gray-500 text-xs font-body"
        >
          <p>&copy; 2025 NovofitBD. All Rights Reserved.</p>
        </div>
      </div>
    </footer>

    <!-- GSAP & Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.27/bundled/lenis.min.js"></script>

    <!-- Firebase SDKs -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
      import {
        getAuth,
        signInAnonymously,
        signInWithCustomToken,
      } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
      import {
        getFirestore,
        collection,
        query,
        where,
        limit,
        getDocs,
      } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

      // Firebase Configuration
      const firebaseConfig = {
        apiKey: "AIzaSyCPWe_VrV_Rq9HcKruC5uoC9jNFkwpzNcU",
        authDomain: "aurora-e-commerce.firebaseapp.com",
        projectId: "aurora-e-commerce",
        storageBucket: "aurora-e-commerce.firebasestorage.app",
        messagingSenderId: "177216689386",
        appId: "1:177216689386:web:04f567db96218da3323393",
        measurementId: "G-0Q9ZFHSFS1",
      };

      // App Logic
      let db;
      let auth;
      let products = [];

      // Update Cart Count
      function updateCartCount() {
        const cart = JSON.parse(localStorage.getItem("aurora-cart")) || [];
        const count = cart.reduce((acc, item) => acc + item.quantity, 0);
        const el = document.getElementById("cart-count");
        if (el) el.textContent = count;
      }

      // Cart Logic (Added for Home Page)
      function getCart() {
        return JSON.parse(localStorage.getItem("aurora-cart")) || [];
      }

      function saveCart(cart) {
        localStorage.setItem("aurora-cart", JSON.stringify(cart));
      }

      function showNotification() {
        const notification = document.getElementById("cart-notification");
        notification.style.transform = "translate(-50%, 0)";
        setTimeout(() => {
          notification.style.transform = "translate(-50%, 200%)";
        }, 3000);
      }

      window.addToCart = function (productId) {
        const product = products.find((p) => p.id === productId);
        if (!product) return;

        let cart = getCart();
        // Default size/color if not specified (since this is quick add from home)
        const size =
          product.sizes && product.sizes.length > 0 ? product.sizes[0] : null;
        const color =
          product.colors && product.colors.length > 0
            ? product.colors[0]
            : null;

        const existingItem = cart.find(
          (item) =>
            item.product.id === product.id &&
            item.size === size &&
            item.color === color
        );

        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          cart.push({ product, quantity: 1, size, color });
        }

        saveCart(cart);
        updateCartCount();
        showNotification();
      };

      // Render Featured Products
      function renderFeaturedProducts(fetchedProducts) {
        const container = document.getElementById("featured-products");
        container.innerHTML = "";
        products = fetchedProducts; // Store globally for cart logic

        products.forEach((product, index) => {
          const imageUrl =
            product.images && product.images.length > 0
              ? product.images[0]
              : "https://placehold.co/600x800/222/fff?text=No+Image";
          const price = product.basePrice
            ? `৳${product.basePrice.toFixed(2)}`
            : "N/A";

          const delay = index * 0.1;

          const html = `
                <div class="product-card group relative opacity-0 translate-y-8" style="animation: fadeInUp 0.6s forwards ${delay}s">
                    <div class="relative overflow-hidden rounded-sm mb-4">
                        <a href="shop?id=${product.id}" class="block">
                            <img src="${imageUrl}" alt="${
            product.name
          }" class="w-full aspect-[3/4] object-cover transition-transform duration-700 group-hover:scale-105" />
                        </a>
                        
                        <!-- Desktop: Add to Cart Overlay (Hidden on Mobile) -->
                        <div class="hidden md:flex absolute inset-0 bg-black/40 flex-col items-center justify-end p-4 transition-opacity duration-300 opacity-0 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto">
                            <button
                                class="bg-white text-black py-3 px-6 rounded-full text-xs font-bold uppercase tracking-widest hover:bg-gray-200 transition-colors w-full mb-2"
                                onclick="window.addToCart('${product.id}')"
                            >
                                Add to Cart
                            </button>
                            <a href="product-details?id=${
                              product.id
                            }" class="bg-transparent border border-white text-white py-3 px-6 rounded-full text-xs font-bold uppercase tracking-widest hover:bg-white/10 transition-colors w-full text-center">
                                View Details
                            </a>
                        </div>
                    </div>
                    
                    <div class="flex flex-col gap-2">
                        <div class="flex justify-between items-start">
                            <div>
                                <a href="shop?id=${
                                  product.id
                                }" class="font-heading text-xl text-white hover:text-gray-300 transition-colors block">${
            product.name
          }</a>
                                <p class="text-gray-500 text-sm mt-1">${
                                  product.category || "Collection"
                                }</p>
                            </div>
                            <p class="font-body text-white font-medium">${price}</p>
                        </div>

                        <!-- Mobile: Always Visible Add to Cart & Details -->
                        <div class="flex gap-2 md:hidden mt-2">
                            <button 
                                class="flex-1 bg-white text-black py-2 rounded text-xs font-bold uppercase tracking-widest"
                                onclick="window.addToCart('${product.id}')"
                            >
                                Add
                            </button>
                            <a 
                                href="product-details?id=${product.id}"
                                class="flex-1 border border-white/30 text-white py-2 rounded text-xs font-bold uppercase tracking-widest text-center"
                            >
                                Details
                            </a>
                        </div>
                    </div>
                </div>
              `;
          container.innerHTML += html;
        });
      }

      // Initialize Firebase
      async function initApp() {
        try {
          const app = initializeApp(firebaseConfig);
          db = getFirestore(app);
          auth = getAuth(app);

          // Auth
          const initialAuthToken =
            typeof __initial_auth_token !== "undefined"
              ? __initial_auth_token
              : null;
          if (initialAuthToken) {
            await signInWithCustomToken(auth, initialAuthToken);
          } else {
            await signInAnonymously(auth);
          }

          // Fetch Data
          const productsRef = collection(
            db,
            `/artifacts/aurora-data/public/data/products`
          );
          // Fetch published products, limit to 4 for the home page
          const q = query(
            productsRef,
            where("status", "==", "Published"),
            limit(4)
          );
          const snapshot = await getDocs(q);

          const fetchedProducts = [];
          snapshot.forEach((doc) => {
            fetchedProducts.push({ id: doc.id, ...doc.data() });
          });

          renderFeaturedProducts(fetchedProducts);
        } catch (e) {
          console.error("Firebase Error:", e);
          document.getElementById(
            "featured-products"
          ).innerHTML = `<p class="text-center text-red-500 col-span-full">Unable to load products. Please try again later.</p>`;
        }
      }

      // Global style for fade in animation
      const style = document.createElement("style");
      style.innerHTML = `
        @keyframes fadeInUp {
            to { opacity: 1; transform: translateY(0); }
        }
      `;
      document.head.appendChild(style);

      // Start App
      document.addEventListener("DOMContentLoaded", () => {
        updateCartCount();
        initApp();
      });
    </script>

    <!-- UI Interactions Script -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // 1. Loader
        setTimeout(() => {
          const loader = document.getElementById("loader");
          loader.style.opacity = "0";
          setTimeout(() => loader.remove(), 1000);

          // Trigger Hero Animations
          gsap.to(".hero-anim", {
            y: 0,
            opacity: 1,
            duration: 1.5,
            stagger: 0.2,
            ease: "power3.out",
            delay: 0.5,
          });
        }, 1500);

        // 2. Smooth Scroll (Lenis)
        const lenis = new Lenis({
          duration: 1.2,
          easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
          direction: "vertical",
          gestureDirection: "vertical",
          smooth: true,
          mouseMultiplier: 1,
          smoothTouch: false,
          touchMultiplier: 2,
        });
        function raf(time) {
          lenis.raf(time);
          requestAnimationFrame(raf);
        }
        requestAnimationFrame(raf);

        // 3. GSAP ScrollTrigger Integration
        gsap.registerPlugin(ScrollTrigger);

        // Parallax Effects for Images
        document.querySelectorAll("[data-speed]").forEach((el) => {
          gsap.to(el, {
            y: (i, target) => -100 * target.dataset.speed,
            ease: "none",
            scrollTrigger: {
              trigger: el,
              start: "top bottom",
              end: "bottom top",
              scrub: 0,
            },
          });
        });

        // 4. Custom Cursor
        const cursor = document.querySelector(".cursor");
        const follower = document.querySelector(".cursor-follower");

        let mouseX = 0,
          mouseY = 0;
        let followerX = 0,
          followerY = 0;

        window.addEventListener("mousemove", (e) => {
          mouseX = e.clientX;
          mouseY = e.clientY;

          gsap.to(cursor, {
            x: mouseX,
            y: mouseY,
            duration: 0.1,
          });
        });

        // Smooth follower movement loop
        function animateFollower() {
          followerX += (mouseX - followerX) * 0.1;
          followerY += (mouseY - followerY) * 0.1;

          gsap.set(follower, { x: followerX, y: followerY });
          requestAnimationFrame(animateFollower);
        }
        animateFollower();

        // Cursor Hover States
        document.querySelectorAll("a, button").forEach((el) => {
          el.addEventListener("mouseenter", () =>
            follower.classList.add("cursor-grow")
          );
          el.addEventListener("mouseleave", () =>
            follower.classList.remove("cursor-grow")
          );
        });

        // 5. Magnetic Button Effect
        document.querySelectorAll(".magnetic-item").forEach((el) => {
          el.addEventListener("mousemove", function (e) {
            const pos = this.getBoundingClientRect();
            const x = e.clientX - pos.left - pos.width / 2;
            const y = e.clientY - pos.top - pos.height / 2;

            gsap.to(this, {
              x: x * 0.4,
              y: y * 0.4,
              duration: 0.3,
              ease: "power2.out",
            });
          });
          el.addEventListener("mouseleave", function () {
            gsap.to(this, {
              x: 0,
              y: 0,
              duration: 0.5,
              ease: "elastic.out(1, 0.3)",
            });
          });
        });

        // 6. Mobile Menu & Search
        const mobileMenu = document.getElementById("mobile-menu");
        document
          .getElementById("hamburger-btn")
          .addEventListener("click", () => mobileMenu.classList.add("open"));
        document
          .getElementById("close-menu")
          .addEventListener("click", () => mobileMenu.classList.remove("open"));

        const searchOverlay = document.getElementById("search-overlay");
        document
          .getElementById("open-search-btn")
          .addEventListener("click", () => searchOverlay.classList.add("open"));
        document
          .getElementById("close-search-btn")
          .addEventListener("click", () =>
            searchOverlay.classList.remove("open")
          );

        // 7. Navbar Scroll Effect
        const header = document.querySelector("header");
        window.addEventListener("scroll", () => {
          if (window.scrollY > 50) {
            header.classList.add("bg-black/80", "backdrop-blur-md");
          } else {
            header.classList.remove("bg-black/80", "backdrop-blur-md");
          }
        });
      });
    </script>
  </body>
</html>
